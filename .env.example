# Vikunja MCP Server Configuration
# Copy this file to .env and configure your environment

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Vikunja server URL (required for auto-authentication)
# Example: https://vikunja.example.com or http://localhost:3456
VIKUNJA_URL=https://vikunja.example.com

# Vikunja API token (required for auto-authentication)
# Get this from your Vikunja settings -> API Keys
# Format: tk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx (API Token)
# Format: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... (JWT Token for full access)
VIKUNJA_API_TOKEN=your-api-token-here

# MCP server mode (optional)
# Values: server, client, standalone
MCP_MODE=server

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (optional)
# Values: error, warn, info, debug
# Default: info (production), debug (development)
LOG_LEVEL=info

# Enable debug logging (optional)
# Values: true, false
# Default: false (production), true (development)
DEBUG=false

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Global rate limiting control
# Set to 'false' to disable all rate limiting (useful for development/testing)
RATE_LIMIT_ENABLED=true

# Default tool rate limits
RATE_LIMIT_PER_MINUTE=60           # Requests per minute for standard tools
RATE_LIMIT_PER_HOUR=1000           # Requests per hour for standard tools
MAX_REQUEST_SIZE=1048576           # Maximum request size in bytes (1MB)
MAX_RESPONSE_SIZE=10485760         # Maximum response size in bytes (10MB)  
TOOL_TIMEOUT=30000                 # Tool execution timeout in milliseconds (30s)

# Expensive tool rate limits (for resource-intensive operations)
EXPENSIVE_RATE_LIMIT_PER_MINUTE=10        # Requests per minute for expensive tools
EXPENSIVE_RATE_LIMIT_PER_HOUR=100         # Requests per hour for expensive tools
EXPENSIVE_MAX_REQUEST_SIZE=2097152        # Maximum request size in bytes (2MB)
EXPENSIVE_MAX_RESPONSE_SIZE=52428800      # Maximum response size in bytes (50MB)
EXPENSIVE_TOOL_TIMEOUT=120000             # Tool execution timeout in milliseconds (2 min)

# Bulk operation rate limits (for batch operations)
BULK_RATE_LIMIT_PER_MINUTE=5              # Requests per minute for bulk operations
BULK_RATE_LIMIT_PER_HOUR=50               # Requests per hour for bulk operations
BULK_MAX_REQUEST_SIZE=5242880             # Maximum request size in bytes (5MB)
BULK_MAX_RESPONSE_SIZE=104857600          # Maximum response size in bytes (100MB)
BULK_TOOL_TIMEOUT=300000                  # Tool execution timeout in milliseconds (5 min)

# Export operation rate limits (for data export operations)
EXPORT_RATE_LIMIT_PER_MINUTE=2            # Requests per minute for export operations
EXPORT_RATE_LIMIT_PER_HOUR=10             # Requests per hour for export operations
EXPORT_MAX_REQUEST_SIZE=1048576           # Maximum request size in bytes (1MB)
EXPORT_MAX_RESPONSE_SIZE=1073741824       # Maximum response size in bytes (1GB)
EXPORT_TOOL_TIMEOUT=600000                # Tool execution timeout in milliseconds (10 min)

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable server-side filtering for better performance
# Values: true, false
# Default: false (development/test), true (production)
VIKUNJA_ENABLE_SERVER_SIDE_FILTERING=true

# =============================================================================
# ENVIRONMENT PROFILES
# =============================================================================

# Set NODE_ENV to activate environment-specific configurations:
# - development: Debug logging, relaxed rate limits, experimental features
# - test: Error-only logging, disabled rate limiting, consistent behavior  
# - production: Standard logging, full rate limiting, stable features
NODE_ENV=production

# =============================================================================
# CONFIGURATION MIGRATION NOTES
# =============================================================================

# This .env.example documents all environment variables used by the Vikunja MCP server.
# The server uses a centralized configuration system with the following priorities:
#
# 1. Additional sources (programmatic configuration)
# 2. Environment variables (this file)
# 3. Environment profiles (development/test/production defaults)
# 4. Schema defaults (fallback values)
#
# Environment-specific behavior:
#
# DEVELOPMENT:
# - Debug logging enabled by default
# - Rate limiting disabled for easier testing
# - Server-side filtering enabled for testing
# - Experimental features enabled
#
# TEST:
# - Error-only logging to reduce test noise
# - Rate limiting disabled for test performance
# - Server-side filtering disabled for consistent behavior
# - Experimental features disabled
#
# PRODUCTION:
# - Info-level logging for operational visibility
# - Full rate limiting enabled for protection
# - Server-side filtering enabled for performance
# - Only stable features enabled
#
# For more information, see src/config/ConfigurationManager.ts